<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quill Auto Blogger API</title>
  <style>
    :root{
      --bg:#0f172a;           /* slate-900 */
      --panel:#111827;        /* gray-900  */
      --panel-2:#1f2937;      /* gray-800  */
      --muted:#94a3b8;        /* slate-400 */
      --text:#e5e7eb;         /* gray-200  */
      --line:#223049;
      --accent:#60a5fa;       /* blue-400  */
      --green:#22c55e;
      --yellow:#f59e0b;
      --red:#ef4444;
      --badge:#0b1222;
      --radius:10px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      --sans: Inter, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:linear-gradient(180deg,#0b1222 0%, var(--bg) 200px);
      color:var(--text);
    }

    /* ===== Shell layout ===== */
    .shell{
      display:grid;
      grid-template-columns: 260px 1fr 420px;
      gap:0;
      min-height:100vh;
    }

    /* ===== Sidebar ===== */
    .sidebar{
      position:sticky; top:0; height:100vh; overflow:auto;
      background:rgba(17,24,39,.7);
      border-right:1px solid var(--line);
      backdrop-filter: blur(6px);
      padding:20px 14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      padding:10px 8px 18px; margin-bottom:8px;
      border-bottom:1px solid var(--line);
    }
    .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px var(--accent)}
    .brand h1{font-size:15px;margin:0;font-weight:700;letter-spacing:.3px}

    .nav-group{margin:14px 0}
    .nav-title{
      font-size:12px;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);
      padding:10px 8px;
    }
    .nav-item{
      display:flex;align-items:center;gap:10px;
      padding:10px 10px;border-radius:8px;color:var(--text);
      text-decoration:none; font-size:14px;
    }
    .nav-item:hover{background:#101826}
    .nav-item.active{background:#0c1424; outline:1px solid #173156}

    /* ===== Main content ===== */
    .main{
      padding:32px 32px 120px;
      max-width: 920px;
    }
    .page-title{font-size:28px;font-weight:800;margin:4px 0 6px}
    .page-sub{color:var(--muted);max-width:70ch;margin-bottom:24px}
    .hr{height:1px;background:var(--line);margin:20px 0 28px}

    .section{margin:32px 0}
    .section h2{
      font-size:16px;text-transform:uppercase;letter-spacing:.14em;color:var(--muted);
      margin:0 0 10px;
    }

    /* Endpoint accordion header */
    .ep{
      border:1px solid var(--line);
      border-radius:12px; overflow:hidden; margin:14px 0; background:rgba(17,24,39,.6)
    }
    .ep-h{
      display:flex; flex-wrap:wrap; gap:10px 14px; align-items:center;
      padding:14px 16px; cursor:pointer;
      background:linear-gradient(180deg,#121a2a 0%, #0f1626 100%);
      border-bottom:1px solid transparent;
    }
    .ep-h:hover{background:#111a2e}
    .badge{
      padding:3px 9px; border-radius:6px; font-weight:700; font-size:11px; letter-spacing:.08em;
      background:#0e203b; color:#cfe5ff; border:1px solid #19365f;
    }
    .method{font-weight:800}
    .GET{background:#10233f;border-color:#1c3f6c;color:#93c5fd}
    .POST{background:#0e2a1b;border-color:#1d5b39;color:#86efac}
    .PUT{background:#2a200e;border-color:#6b511c;color:#fde68a}
    .DELETE{background:#2b1212;border-color:#6b1d1d;color:#fecaca}

    .path{font-family:var(--mono);font-size:14px;background:#101827;border:1px solid #1f2b45;padding:6px 10px;border-radius:8px}
    .auth{font-size:11px;border-radius:6px;padding:3px 8px;border:1px solid #26452b;background:#0e2013;color:#b5f7c7}
    .desc{color:var(--muted);font-size:13px}

    .ep-b{display:none; padding:18px 18px 8px; background:#0b1326}
    .ep.open .ep-b{display:block}
    .cols{
      display:grid; grid-template-columns: 1.1fr .9fr; gap:24px;
    }
    .kv h4{
      font-size:12px; text-transform:uppercase; letter-spacing:.14em; color:#9fb1cc; margin:0 0 10px;
    }
    .item{margin:0 0 14px}
    .k{font-size:13px;color:#c9d7ef;margin-bottom:6px}
    .v{font-family:var(--mono);font-size:13px;background:#0e172a;border:1px solid #1d2a45;padding:8px 10px;border-radius:8px;color:#dbeafe;word-break:break-all}

    /* ===== Sticky examples panel ===== */
    .examples{
      position:sticky; top:0; height:100vh; overflow:auto;
      border-left:1px solid var(--line); background:var(--panel);
      padding:22px 18px;
    }
    .ex-title{font-size:12px;text-transform:uppercase;letter-spacing:.14em;color:var(--muted);margin:2px 0 10px}
    .ex-tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{
      font-size:12px;padding:6px 10px;border-radius:8px;border:1px solid #20416e;background:#0b162b;color:#cfe1ff;cursor:pointer
    }
    .tab.active{outline:2px solid #2b68b6}
    .code{
      position:relative;background:var(--panel-2);border:1px solid #1f2b45;border-radius:10px;padding:12px; font-family:var(--mono);font-size:13px;color:#dbeafe;white-space:pre;overflow:auto; line-height:1.5;
    }
    .code + .ex-sub{margin-top:8px}
    .ex-sub{color:var(--muted);font-size:12px}
    .copy{
      position:absolute; top:8px; right:8px; font-size:12px; padding:6px 8px; border-radius:7px;
      border:1px solid #2a3b60; background:#0b172f; color:#cfe1ff; cursor:pointer
    }

    /* Responsive */
    @media (max-width: 1200px){
      .shell{grid-template-columns: 240px 1fr}
      .examples{display:none}
    }
    @media (max-width: 720px){
      .shell{grid-template-columns: 1fr}
      .sidebar{position:relative;height:auto}
      .main{padding:22px 16px 80px}
    }

    a{color:#93c5fd}
  </style>
</head>
<body>
  <div class="shell">
    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar">
      <div class="brand"><span class="dot"></span><h1>Quill Auto Blogger API</h1></div>

      <div class="nav-group">
        <div class="nav-title">Overview</div>
        <a class="nav-item active" href="#intro">Introduction</a>
      </div>

      <div class="nav-group">
        <div class="nav-title">Blog Content</div>
        <a class="nav-item" href="#ep-blog">GET /api/blog/{date}</a>
        <a class="nav-item" href="#ep-md">GET /api/blog/{date}/markdown</a>
        <a class="nav-item" href="#ep-digest">GET /api/blog/{date}/digest</a>
      </div>

      <div class="nav-group">
        <div class="nav-title">Assets</div>
        <a class="nav-item" href="#ep-assets">GET /api/assets/blog/{date}</a>
      </div>

      <div class="nav-group">
        <div class="nav-title">Control (Protected)</div>
        <a class="nav-item" href="#ep-start">POST /control/record/start</a>
      </div>

      <div class="nav-group">
        <div class="nav-title">Examples</div>
        <a class="nav-item" href="#available">Available Blogs</a>
      </div>
    </aside>

    <!-- ================= MAIN ================= -->
    <main class="main">
      <section id="intro">
        <div class="page-title">Accounts</div>
        <p class="page-sub">Automated blog generation from Twitch clips and GitHub activity. Access your finalized blogs through our RESTful API endpoints.</p>
        <div class="hr"></div>
      </section>

      <section class="section" aria-label="Blog Content Endpoints">
        <h2>Blog Content Endpoints</h2>

        <!-- GET /api/blog/{date} -->
        <article id="ep-blog" class="ep" data-ex-curl='curl "https://quill-blog-api.paulchrisluke.workers.dev/api/blog/2025-08-29"' data-ex-json='{
  "date": "2025-08-29",
  "stories": [
    {
      "id": "story_20250829_pr43",
      "title": "Story Title",
      "content": "Story content...",
      "assets": {
        "video": "https://media.paulchrisluke.com/stories/2025/08/29/story_20250829_pr43.mp4",
        "images": ["..."],
        "highlights": ["..."]
      }
    }
  ]
}'>
          <header class="ep-h">
            <span class="badge method GET">GET</span>
            <span class="path">/api/blog/{date}</span>
            <span class="auth">Public</span>
            <span class="desc">Retrieve complete blog data including story packets, metadata, and assets.</span>
          </header>
          <div class="ep-b">
            <div class="cols">
              <div class="kv">
                <h4>Path Parameters</h4>
                <div class="item">
                  <div class="k">date</div>
                  <div class="v">string (YYYY-MM-DD format)</div>
                </div>
                <h4>Example</h4>
                <div class="item"><div class="v">/api/blog/2025-08-29</div></div>
              </div>
              <div class="kv">
                <h4>Notes</h4>
                <div class="item"><div class="v">Returns story packets with assets and metadata for the given date.</div></div>
              </div>
            </div>
          </div>
        </article>

        <!-- GET /api/blog/{date}/markdown -->
        <article id="ep-md" class="ep" data-ex-curl='curl "https://quill-blog-api.paulchrisluke.workers.dev/api/blog/2025-08-29/markdown"' data-ex-json="# Blog Post Title

This is the markdown content of the blog post...

## Story 1
Content for the first story...

## Story 2
Content for the second story...">
          <header class="ep-h">
            <span class="badge method GET">GET</span>
            <span class="path">/api/blog/{date}/markdown</span>
            <span class="auth">Public</span>
            <span class="desc">Retrieve just the markdown content for the blog post.</span>
          </header>
          <div class="ep-b">
            <div class="cols">
              <div class="kv">
                <h4>Path Parameters</h4>
                <div class="item"><div class="k">date</div><div class="v">string (YYYY-MM-DD format)</div></div>
                <h4>Example</h4>
                <div class="item"><div class="v">/api/blog/2025-08-29/markdown</div></div>
              </div>
              <div class="kv">
                <h4>Notes</h4>
                <div class="item"><div class="v">Useful when your renderer only needs final Markdown.</div></div>
              </div>
            </div>
          </div>
        </article>

        <!-- GET /api/blog/{date}/digest -->
        <article id="ep-digest" class="ep" data-ex-curl='curl "https://quill-blog-api.paulchrisluke.workers.dev/api/blog/2025-08-29/digest"' data-ex-json='{
  "date": "2025-08-29",
  "stories": [
    {
      "id": "story_20250829_pr43",
      "title": "Story Title",
      "summary": "Story summary...",
      "metadata": {
        "created_at": "2025-08-29T10:00:00Z",
        "tags": ["github", "twitch"]
      }
    }
  ]
}'>
          <header class="ep-h">
            <span class="badge method GET">GET</span>
            <span class="path">/api/blog/{date}/digest</span>
            <span class="auth">Public</span>
            <span class="desc">Retrieve digest data with story packets and metadata.</span>
          </header>
          <div class="ep-b">
            <div class="cols">
              <div class="kv">
                <h4>Path Parameters</h4>
                <div class="item"><div class="k">date</div><div class="v">string (YYYY-MM-DD format)</div></div>
                <h4>Example</h4>
                <div class="item"><div class="v">/api/blog/2025-08-29/digest</div></div>
              </div>
              <div class="kv">
                <h4>Response</h4>
                <div class="item"><div class="v">Digest returns summaries and metadata only.</div></div>
              </div>
            </div>
          </div>
        </article>
      </section>

      <section class="section" aria-label="Asset Endpoints">
        <h2>Asset Endpoints</h2>

        <!-- GET /api/assets/blog/{date} -->
        <article id="ep-assets" class="ep" data-ex-curl='curl "https://quill-blog-api.paulchrisluke.workers.dev/api/assets/blog/2025-08-29"' data-ex-json='{
  "video": "https://media.paulchrisluke.com/stories/2025/08/29/story_20250829_pr43.mp4",
  "images": [
    "https://media.paulchrisluke.com/stories/2025/08/29/story_20250829_pr43_intro.png"
  ],
  "highlights": [
    "https://media.paulchrisluke.com/stories/2025/08/29/story_20250829_pr43_hl_001.png"
  ]
}'>
          <header class="ep-h">
            <span class="badge method GET">GET</span>
            <span class="path">/api/assets/blog/{date}</span>
            <span class="auth">Public</span>
            <span class="desc">Retrieve all assets (images, videos, highlights) for a blog post.</span>
          </header>
          <div class="ep-b">
            <div class="cols">
              <div class="kv">
                <h4>Path Parameters</h4>
                <div class="item"><div class="k">date</div><div class="v">string (YYYY-MM-DD format)</div></div>
                <h4>Response Structure</h4>
                <div class="item"><div class="v">{"video":"...","images":[...],"highlights":[...]}</div></div>
              </div>
              <div class="kv">
                <h4>Notes</h4>
                <div class="item"><div class="v">Use to prefetch media before rendering the post.</div></div>
              </div>
            </div>
          </div>
        </article>
      </section>

      <section class="section" aria-label="Control Endpoints">
        <h2>Control Endpoints (Protected)</h2>

        <!-- POST /control/record/start -->
        <article id="ep-start" class="ep" data-ex-curl='curl -X POST "https://quill-blog-api.paulchrisluke.workers.dev/control/record/start" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '\''{"story_id":"test_story","bounded":false}'\'' ' data-ex-json='{
  "status": "started",
  "mode": "bounded",
  "story_id": "test_story",
  "prep_delay": 5,
  "duration": 15
}'>
          <header class="ep-h">
            <span class="badge method POST">POST</span>
            <span class="path">/control/record/start</span>
            <span class="auth">Protected</span>
            <span class="desc">Start recording for a story (with optional bounded mode).</span>
          </header>
          <div class="ep-b">
            <div class="cols">
              <div class="kv">
                <h4>Headers</h4>
                <div class="item"><div class="k">Authorization</div><div class="v">Bearer &lt;CONTROL_API_TOKEN&gt;</div></div>
                <h4>Request Body</h4>
                <div class="item"><div class="k">story_id</div><div class="v">string</div></div>
                <div class="item"><div class="k">date</div><div class="v">string (YYYY-MM-DD, optional)</div></div>
                <div class="item"><div class="k">bounded</div><div class="v">boolean (default: false)</div></div>
              </div>
              <div class="kv">
                <h4>Notes</h4>
                <div class="item"><div class="v">Requires a valid control token. Returns timing info for the session.</div></div>
              </div>
            </div>
          </div>
        </article>
      </section>

      <section id="available" class="section" aria-label="Available Blogs">
        <h2>Available Blogs</h2>
        <div class="ep">
          <div class="ep-b" style="display:block;padding-top:16px">
            <div class="cols" style="grid-template-columns:1fr">
              <div class="kv">
                <div class="item"><div class="k">2025-08-27</div><div class="v">/api/blog/2025-08-27</div></div>
                <div class="item"><div class="k">2025-08-29</div><div class="v">/api/blog/2025-08-29</div></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- ================= EXAMPLES PANEL ================= -->
    <aside class="examples">
      <div class="ex-title">Code</div>
      <div class="ex-tabs">
        <button class="tab active" data-lang="curl">cURL</button>
      </div>

      <div class="code" id="code-snippet">
        <button class="copy" id="copy-btn">Copy</button>
curl "https://quill-blog-api.paulchrisluke.workers.dev/api/blog/2025-08-29"
      </div>
      <div class="ex-sub">Request</div>

      <div style="height:12px"></div>

      <div class="code" id="code-json">
        <button class="copy" data-target="code-json">Copy</button>
{
  "date": "2025-08-29",
  "stories": [
    {
      "id": "story_20250829_pr43",
      "title": "Story Title",
      "content": "Story content...",
      "assets": {
        "video": "https://media.paulchrisluke.com/stories/2025/08/29/story_20250829_pr43.mp4",
        "images": ["..."],
        "highlights": ["..."]
      }
    }
  ]
}
      </div>
      <div class="ex-sub">200 Example</div>
    </aside>
  </div>

  <script>
    // Accordion behavior + examples panel updates
    document.querySelectorAll('.ep').forEach((ep,i)=>{
      const header = ep.querySelector('.ep-h');
      header.addEventListener('click', ()=>{
        // open clicked
        ep.classList.toggle('open');
        // update side examples
        const curl = ep.getAttribute('data-ex-curl') || '';
        const json = ep.getAttribute('data-ex-json') || '';
        if(curl){
          document.getElementById('code-snippet').childNodes.forEach(n=>{
            if(n.nodeType===3){ n.nodeValue = "\\n"+curl; }
          });
        }
        if(json){
          document.getElementById('code-json').childNodes.forEach(n=>{
            if(n.nodeType===3){ n.nodeValue = "\\n"+json; }
          });
        }
        // highlight active nav item
        const id = ep.id;
        document.querySelectorAll('.nav-item').forEach(a=>a.classList.toggle('active', a.getAttribute('href')==="#"+id));
      });
    });

    // Copy buttons
    function copyText(el){
      const txt = [...el.childNodes].filter(n=>n.nodeType===3).map(n=>n.nodeValue).join('');
      navigator.clipboard.writeText(txt.trim());
      const btn = el.querySelector('.copy');
      if(btn){
        const old = btn.textContent; btn.textContent="Copied!";
        setTimeout(()=>btn.textContent=old,1200);
      }
    }
    document.querySelectorAll('.code').forEach(block=>{
      const btn = block.querySelector('.copy');
      if(btn){ btn.addEventListener('click', ()=>copyText(block)); }
    });

    // Smooth anchor scroll + active highlight
    document.querySelectorAll('.nav-item[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // Open first endpoint by default
    const first = document.querySelector('.ep');
    if(first){ first.classList.add('open'); }
  </script>
</body>
</html>
